version: '3'
services:

  nginx-proxy:
    build: 
      context: ./nginx-proxy
      dockerfile: ./dockerfile
    image: nginx-proxy
    container_name: nginx-proxy-container
    ports:
      - "8080:8080"
      - "4000:4000"
      - "4001:4001"
      - "4002:4002"
    restart: always
    depends_on:
      - welcome-api
      - bof-api
      - bin-upload


  welcome-api:
    build: 
      context: ./welcome-api
      dockerfile: ./dockerfile
    container_name: welcome-api-container
    restart: always

  bof-api:
    build: 
      context: ./bof-api
      dockerfile: ./dockerfile
    container_name: bof-api
    depends_on:
      - bin-upload
    restart: always

  bin-upload:
    build:
      context: ./bin-upload
      dockerfile: ./dockerfile
    container_name: bin-upload-container
    restart: always

  rop1-api:
    build: 
      context: ./rop1-api
      dockerfile: ./dockerfile
    container_name: rop1-api-container
    depends_on:
      - bin-upload
    restart: always

  # bottle-app:
  #   build: 
  #     context: ./bottle-app
  #     dockerfile: ./dockerfile
  #   image: bottle-app
  #   container_name: bottle-app-container
  # mysql-db:
  #   build: ./mysql-db
  #   image: mysql
  #   container_name: mysql-db-container
  #   environment:
  #     MYSQL_ROOT_PASSWORD: mysql
  # c-api:
  #   build: 
  #     context: ./c-api
  #     dockerfile: ./dockerfile
  #   image: c-api
  #   container_name: c-api-container